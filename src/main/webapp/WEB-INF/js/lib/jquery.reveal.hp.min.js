(function(a){a("a[data-reveal-id]").live("click",function(c){c.preventDefault();var b=a(this).attr("data-reveal-id");a("#"+b).reveal(a(this).data());});a.fn.reveal=function(c){var d={animation:"fade",animationspeed:190,closeonbackgroundclick:true,dismissmodalclass:"close-reveal-modal",opacity:a.support.opacity,targetOpacity:(a.support.opacity?1:70),closeHandler:function(){}},b,e=function(){};b=a.extend({},d,c);return this.each(function(){var n=a(this),g,h=parseInt(n.css("top")),j=n.height()+h,i=false,m='<div class="reveal-modal-bg" />',l=a(".reveal-modal-bg");if(l.length===0){if(b.opacity){a(m).insertAfter(n);}else{a(n).after(a(m));}l=a(".reveal-modal-bg");} if(!b.opacity){ e=function(r){ if(a.browser.msie  && parseInt(a.browser.version, 10) === 8){ r = 40;} l.css({ display:"inline-block", filter:"alpha(opacity="+((r<1)?r*100:r)+")" });};} function q(r){n.trigger("reveal:close");if(typeof b.closeHandler==="function"){b.closeHandler(r);}}function p(){a("."+b.dismissmodalclass).bind("click.modalEvent",q);if(b.closeonbackgroundclick){l.css({cursor:"pointer"});l.bind("click.modalEvent",q);}a("body").keyup(function(r){if(r.which===27){q();}});}function f(){k();e(b.targetOpacity);}function k(){i=false;}function o(){i=true;}n.bind("reveal:rewire",p);n.bind("reveal:open",function(){l.unbind("click.modalEvent");a("."+b.dismissmodalclass).unbind("click.modalEvent");if(!i){o();if(b.animation==="fadeAndPop"){n.css({top:a(document).scrollTop()-j,opacity:0,visibility:"visible"});e(0);l.fadeIn(b.animationspeed/2);n.delay(b.animationspeed/2).animate({top:a(document).scrollTop()+h+"px",opacity:b.targetOpacity},b.animationspeed,f);}else{if(b.animation==="fade"){n.css({opacity:0,visibility:"visible",top:a(document).scrollTop()+h});e(0);l.fadeIn(b.animationspeed/2);n.delay(b.animationspeed/2).animate({opacity:b.targetOpacity},b.animationspeed,f);}else{if(b.animation==="none"){n.css({visibility:"visible",top:a(document).scrollTop()+h});l.css({display:"block"});f();}}}}n.unbind("reveal:open");});n.bind("reveal:close",function(){if(!i){o();if(b.animation==="fadeAndPop"){l.delay(b.animationspeed).fadeOut(b.animationspeed);n.animate({top:a(document).scrollTop()-j+"px",opacity:0},b.animationspeed/2,function(){n.css({top:h,opacity:1,visibility:"hidden"});k();});}if(b.animation==="fade"){l.delay(b.animationspeed).fadeOut(b.animationspeed);n.animate({opacity:0},b.animationspeed,function(){n.css({opacity:1,visibility:"hidden",top:h});k();});}if(b.animation==="none"){n.css({visibility:"hidden",top:h});l.css({display:"none"});}}n.unbind("reveal:close");});n.trigger("reveal:open");p();});};})(jQuery);